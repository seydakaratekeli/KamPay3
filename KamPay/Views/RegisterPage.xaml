<?xml version="1.0" encoding="utf-8" ?>
<ContentPage 
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    xmlns:res="clr-namespace:KamPay.Services"
    x:Class="KamPay.Views.RegisterPage"
    Title="{Binding Source={x:Static res:LocalizationResourceManager.Instance}, Path=[RegisterTitle]}">
    <ScrollView>
        <VerticalStackLayout Padding="20" Spacing="12">

            <Label Text="{Binding Source={x:Static res:LocalizationResourceManager.Instance}, Path=[RegisterTitle]}" FontSize="24" HorizontalOptions="Center" />

            <Entry Placeholder="{Binding Source={x:Static res:LocalizationResourceManager.Instance}, Path=[FirstName]}" Text="{Binding FirstName}" />
            <Entry Placeholder="{Binding Source={x:Static res:LocalizationResourceManager.Instance}, Path=[LastName]}" Text="{Binding LastName}" />
            <Entry Placeholder="{Binding Source={x:Static res:LocalizationResourceManager.Instance}, Path=[UniversityEmail]}" Text="{Binding Email}" Keyboard="Email" />
            <Entry Placeholder="{Binding Source={x:Static res:LocalizationResourceManager.Instance}, Path=[Password]}" Text="{Binding Password}" IsPassword="True" />
            <Entry Placeholder="{Binding Source={x:Static res:LocalizationResourceManager.Instance}, Path=[PasswordConfirm]}" Text="{Binding PasswordConfirm}" IsPassword="True" />

            <Label Text="{Binding ErrorMessage}" IsVisible="{Binding ErrorMessage}" TextColor="Red" />

            <Button Text="{Binding Source={x:Static res:LocalizationResourceManager.Instance}, Path=[RegisterTitle]}" Command="{Binding RegisterCommand}" />
            <ActivityIndicator IsRunning="{Binding IsLoading}" IsVisible="{Binding IsLoading}" />

            <Button Text="{Binding Source={x:Static res:LocalizationResourceManager.Instance}, Path=[HaveAccountLogin]}" Command="{Binding GoToLoginCommand}" BackgroundColor="Transparent" TextColor="Blue" />

            <!-- Doğrulama bölümü -->
            <Frame IsVisible="{Binding ShowVerificationSection}" Padding="12" BorderColor="#DDD" CornerRadius="8">
                <VerticalStackLayout Spacing="8">
                    <Label Text="{Binding Source={x:Static res:LocalizationResourceManager.Instance}, Path=[EmailVerification]}" FontAttributes="Bold" />
                    <Label Text="{Binding Source={x:Static res:LocalizationResourceManager.Instance}, Path=[EnterVerificationCode]}" FontSize="12" />
                    <Entry Placeholder="{Binding Source={x:Static res:LocalizationResourceManager.Instance}, Path=[VerificationCode]}" Text="{Binding VerificationCode}" Keyboard="Numeric" />
                    <Label Text="{Binding ErrorMessage}" IsVisible="{Binding ErrorMessage}" TextColor="Red" />
                    <Button Text="{Binding Source={x:Static res:LocalizationResourceManager.Instance}, Path=[Verify]}" Command="{Binding VerifyEmailCommand}" />
                    <Button Text="{Binding Source={x:Static res:LocalizationResourceManager.Instance}, Path=[ResendCode]}" Command="{Binding ResendVerificationCommand}" />
                    <Button Text="{Binding Source={x:Static res:LocalizationResourceManager.Instance}, Path=[Cancel]}" Command="{Binding CancelVerificationCommand}" BackgroundColor="Transparent" TextColor="Gray" />
                </VerticalStackLayout>
            </Frame>

        </VerticalStackLayout>
    </ScrollView>
</ContentPage>
